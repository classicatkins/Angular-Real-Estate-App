import { Component, EventEmitter, Input, Output } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../theme.service";
import * as i2 from "../icon-placeholder/icon-placeholder.component";
import * as i3 from "../loading-indicator-placeholder/loading-indicator-placeholder.component";
import * as i4 from "@angular/common";
import * as i5 from "@ngx-translate/core";
/**
 * The `AttachmentPreviewList` component displays a preview of the attachments uploaded to a message. Users can delete attachments using the preview component, or retry upload if it failed previously.
 */
export class AttachmentPreviewListComponent {
    constructor(themeService) {
        /**
         * An output to notify the parent component if the user tries to retry a failed upload
         */
        this.retryAttachmentUpload = new EventEmitter();
        /**
         * An output to notify the parent component if the user wants to delete a file
         */
        this.deleteAttachment = new EventEmitter();
        this.themeVersion = themeService.themeVersion;
    }
    attachmentUploadRetried(file) {
        this.retryAttachmentUpload.emit(file);
    }
    attachmentDeleted(upload) {
        this.deleteAttachment.emit(upload);
    }
    trackByFile(_, item) {
        return item.file;
    }
}
AttachmentPreviewListComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.5", ngImport: i0, type: AttachmentPreviewListComponent, deps: [{ token: i1.ThemeService }], target: i0.ɵɵFactoryTarget.Component });
AttachmentPreviewListComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.5", type: AttachmentPreviewListComponent, selector: "stream-attachment-preview-list", inputs: { attachmentUploads$: "attachmentUploads$" }, outputs: { retryAttachmentUpload: "retryAttachmentUpload", deleteAttachment: "deleteAttachment" }, ngImport: i0, template: "<div\n  class=\"rfu-image-previewer\"\n  *ngIf=\"(attachmentUploads$ | async)?.length && themeVersion === '1'\"\n>\n  <ng-container\n    *ngFor=\"\n      let attachmentUpload of attachmentUploads$ | async;\n      trackBy: trackByFile\n    \"\n  >\n    <div\n      *ngIf=\"attachmentUpload.type === 'image'\"\n      class=\"rfu-image-previewer__image\"\n      [class.rfu-image-previewer__image--loaded]=\"\n        attachmentUpload.state === 'success'\n      \"\n      data-testclass=\"attachment-image-preview\"\n    >\n      <div\n        *ngIf=\"attachmentUpload.state === 'error'\"\n        class=\"rfu-image-previewer__retry\"\n        (click)=\"attachmentUploadRetried(attachmentUpload.file)\"\n        (keyup.enter)=\"attachmentUploadRetried(attachmentUpload.file)\"\n        data-testclass=\"upload-retry\"\n      >\n        <stream-icon-placeholder icon=\"retry\"></stream-icon-placeholder>\n      </div>\n      <div class=\"rfu-thumbnail__wrapper\">\n        <div class=\"rfu-thumbnail__overlay\">\n          <div\n            class=\"rfu-icon-button\"\n            data-testclass=\"file-delete\"\n            role=\"button\"\n            (click)=\"attachmentDeleted(attachmentUpload)\"\n            (keyup.enter)=\"attachmentDeleted(attachmentUpload)\"\n          >\n            <stream-icon-placeholder\n              icon=\"close-no-outline\"\n            ></stream-icon-placeholder>\n          </div>\n        </div>\n        <img\n          *ngIf=\"attachmentUpload.url || attachmentUpload.previewUri\"\n          src=\"{{\n            attachmentUpload.url\n              ? attachmentUpload.url\n              : attachmentUpload.previewUri\n          }}\"\n          alt=\"{{ attachmentUpload.file.name }}\"\n          class=\"rfu-thumbnail__image\"\n          data-testclass=\"attachment-image\"\n        />\n      </div>\n      <stream-loading-indicator-placeholder\n        data-testclass=\"loading-indicator\"\n        color=\"rgba(255,255,255,0.7)\"\n        *ngIf=\"attachmentUpload.state === 'uploading'\"\n      ></stream-loading-indicator-placeholder>\n    </div>\n    <div\n      class=\"rfu-file-previewer\"\n      *ngIf=\"\n        attachmentUpload.type === 'file' || attachmentUpload.type === 'video'\n      \"\n      data-testclass=\"attachment-file-preview\"\n    >\n      <ol>\n        <li\n          class=\"rfu-file-previewer__file\"\n          [class.rfu-file-previewer__file--uploading]=\"\n            attachmentUpload.state === 'uploading'\n          \"\n          [class.rfu-file-previewer__file--failed]=\"\n            attachmentUpload.state === 'error'\n          \"\n        >\n          <stream-icon-placeholder icon=\"file\"></stream-icon-placeholder>\n\n          <a\n            data-testclass=\"file-download-link\"\n            href=\"{{ attachmentUpload.url }}\"\n            (click)=\"attachmentUpload.url ? null : $event.preventDefault()\"\n            (keyup.enter)=\"\n              attachmentUpload.url ? null : $event.preventDefault()\n            \"\n            download\n          >\n            {{ attachmentUpload.file.name }}\n            <ng-container *ngIf=\"attachmentUpload.state === 'error'\">\n              <div\n                data-testclass=\"upload-retry\"\n                class=\"rfu-file-previewer__failed\"\n                (click)=\"attachmentUploadRetried(attachmentUpload.file)\"\n                (keyup.enter)=\"attachmentUploadRetried(attachmentUpload.file)\"\n                translate\n              >\n                streamChat.failed\n              </div>\n              <div\n                class=\"rfu-file-previewer__retry\"\n                (click)=\"attachmentUploadRetried(attachmentUpload.file)\"\n                (keyup.enter)=\"attachmentUploadRetried(attachmentUpload.file)\"\n                translate\n              >\n                streamChat.retry\n              </div>\n            </ng-container>\n          </a>\n\n          <span\n            data-testclass=\"file-delete\"\n            class=\"rfu-file-previewer__close-button\"\n            (click)=\"attachmentDeleted(attachmentUpload)\"\n            (keyup.enter)=\"attachmentDeleted(attachmentUpload)\"\n          >\n            <stream-icon-placeholder\n              icon=\"close-no-outline\"\n            ></stream-icon-placeholder>\n          </span>\n          <div\n            *ngIf=\"attachmentUpload.state === 'uploading'\"\n            class=\"rfu-file-previewer__loading-indicator\"\n          >\n            <stream-loading-indicator-placeholder></stream-loading-indicator-placeholder>\n          </div>\n        </li>\n      </ol>\n    </div>\n  </ng-container>\n</div>\n\n<div\n  class=\"str-chat__attachment-preview-list\"\n  *ngIf=\"(attachmentUploads$ | async)?.length && themeVersion === '2'\"\n>\n  <div class=\"str-chat__attachment-list-scroll-container\">\n    <ng-container\n      *ngFor=\"\n        let attachmentUpload of attachmentUploads$ | async;\n        trackBy: trackByFile\n      \"\n    >\n      <div\n        *ngIf=\"attachmentUpload.type === 'image'\"\n        class=\"str-chat__attachment-preview-image\"\n        data-testclass=\"attachment-image-preview\"\n      >\n        <ng-container\n          *ngTemplateOutlet=\"\n            deleteButton;\n            context: { attachmentUpload: attachmentUpload }\n          \"\n        ></ng-container>\n        <div\n          *ngIf=\"attachmentUpload.state === 'uploading'\"\n          class=\"str-chat__attachment-preview-image-loading\"\n        >\n          <stream-loading-indicator-placeholder\n            data-testclass=\"loading-indicator\"\n            [size]=\"18\"\n          ></stream-loading-indicator-placeholder>\n        </div>\n        <ng-container\n          *ngTemplateOutlet=\"\n            retryButton;\n            context: { attachmentUpload: attachmentUpload }\n          \"\n        ></ng-container>\n        <img\n          *ngIf=\"attachmentUpload.url || attachmentUpload.previewUri\"\n          src=\"{{\n            attachmentUpload.url\n              ? attachmentUpload.url\n              : attachmentUpload.previewUri\n          }}\"\n          alt=\"{{ attachmentUpload.file.name }}\"\n          class=\"str-chat__attachment-preview-thumbnail\"\n          data-testclass=\"attachment-image\"\n        />\n      </div>\n      <div\n        class=\"str-chat__attachment-preview-file\"\n        *ngIf=\"\n          attachmentUpload.type === 'file' || attachmentUpload.type === 'video'\n        \"\n        data-testclass=\"attachment-file-preview\"\n      >\n        <stream-icon-placeholder\n          icon=\"unspecified-filetype\"\n        ></stream-icon-placeholder>\n\n        <div class=\"str-chat__attachment-preview-file-end\">\n          <div class=\"str-chat__attachment-preview-file-name\">\n            {{ attachmentUpload.file.name }}\n          </div>\n          <a\n            *ngIf=\"attachmentUpload.state === 'success'\"\n            class=\"str-chat__attachment-preview-file-download\"\n            data-testclass=\"file-download-link\"\n            href=\"{{ attachmentUpload.url }}\"\n            (click)=\"attachmentUpload.url ? null : $event.preventDefault()\"\n            (keyup.enter)=\"\n              attachmentUpload.url ? null : $event.preventDefault()\n            \"\n            download\n          >\n            <stream-icon-placeholder icon=\"download\"></stream-icon-placeholder>\n          </a>\n          <stream-loading-indicator-placeholder\n            *ngIf=\"attachmentUpload.state === 'uploading'\"\n            data-testclass=\"loading-indicator\"\n            [size]=\"18\"\n          ></stream-loading-indicator-placeholder>\n        </div>\n        <ng-container\n          *ngTemplateOutlet=\"\n            deleteButton;\n            context: { attachmentUpload: attachmentUpload }\n          \"\n        ></ng-container>\n        <ng-container\n          *ngTemplateOutlet=\"\n            retryButton;\n            context: { attachmentUpload: attachmentUpload }\n          \"\n        ></ng-container>\n      </div>\n    </ng-container>\n  </div>\n</div>\n\n<ng-template #deleteButton let-attachmentUpload=\"attachmentUpload\">\n  <div\n    class=\"str-chat__attachment-preview-delete\"\n    data-testclass=\"file-delete\"\n    role=\"button\"\n    (click)=\"attachmentDeleted(attachmentUpload)\"\n    (keyup.enter)=\"attachmentDeleted(attachmentUpload)\"\n  >\n    <stream-icon-placeholder icon=\"close-no-outline\"></stream-icon-placeholder>\n  </div>\n</ng-template>\n\n<ng-template #retryButton let-attachmentUpload=\"attachmentUpload\">\n  <div\n    *ngIf=\"attachmentUpload.state === 'error'\"\n    class=\"str-chat__attachment-preview-error str-chat__attachment-preview-error-{{\n      attachmentUpload.type === 'image' ? 'image' : 'file'\n    }}\"\n    (click)=\"attachmentUploadRetried(attachmentUpload.file)\"\n    (keyup.enter)=\"attachmentUploadRetried(attachmentUpload.file)\"\n    data-testclass=\"upload-retry\"\n  >\n    <stream-icon-placeholder icon=\"retry\"></stream-icon-placeholder>\n  </div>\n</ng-template>\n", components: [{ type: i2.IconPlaceholderComponent, selector: "stream-icon-placeholder", inputs: ["icon", "size"] }, { type: i3.LoadingIndicatorPlaceholderComponent, selector: "stream-loading-indicator-placeholder", inputs: ["size", "color"] }], directives: [{ type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i5.TranslateDirective, selector: "[translate],[ngx-translate]", inputs: ["translate", "translateParams"] }, { type: i4.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], pipes: { "async": i4.AsyncPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.5", ngImport: i0, type: AttachmentPreviewListComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'stream-attachment-preview-list',
                    templateUrl: './attachment-preview-list.component.html',
                    styles: [],
                }]
        }], ctorParameters: function () { return [{ type: i1.ThemeService }]; }, propDecorators: { attachmentUploads$: [{
                type: Input
            }], retryAttachmentUpload: [{
                type: Output
            }], deleteAttachment: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0YWNobWVudC1wcmV2aWV3LWxpc3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvc3RyZWFtLWNoYXQtYW5ndWxhci9zcmMvbGliL2F0dGFjaG1lbnQtcHJldmlldy1saXN0L2F0dGFjaG1lbnQtcHJldmlldy1saXN0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3N0cmVhbS1jaGF0LWFuZ3VsYXIvc3JjL2xpYi9hdHRhY2htZW50LXByZXZpZXctbGlzdC9hdHRhY2htZW50LXByZXZpZXctbGlzdC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7Ozs7O0FBS3ZFOztHQUVHO0FBTUgsTUFBTSxPQUFPLDhCQUE4QjtJQWV6QyxZQUFZLFlBQTBCO1FBVnRDOztXQUVHO1FBQ2dCLDBCQUFxQixHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFDcEU7O1dBRUc7UUFDZ0IscUJBQWdCLEdBQUcsSUFBSSxZQUFZLEVBQW9CLENBQUM7UUFJekUsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUMsWUFBWSxDQUFDO0lBQ2hELENBQUM7SUFFRCx1QkFBdUIsQ0FBQyxJQUFVO1FBQ2hDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELGlCQUFpQixDQUFDLE1BQXdCO1FBQ3hDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELFdBQVcsQ0FBQyxDQUFTLEVBQUUsSUFBc0I7UUFDM0MsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ25CLENBQUM7OzJIQTdCVSw4QkFBOEI7K0dBQTlCLDhCQUE4QiwrTkNiM0MsbzJSQWdRQTsyRkRuUGEsOEJBQThCO2tCQUwxQyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRSxnQ0FBZ0M7b0JBQzFDLFdBQVcsRUFBRSwwQ0FBMEM7b0JBQ3ZELE1BQU0sRUFBRSxFQUFFO2lCQUNYO21HQUtVLGtCQUFrQjtzQkFBMUIsS0FBSztnQkFJYSxxQkFBcUI7c0JBQXZDLE1BQU07Z0JBSVksZ0JBQWdCO3NCQUFsQyxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFRoZW1lU2VydmljZSB9IGZyb20gJy4uL3RoZW1lLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXR0YWNobWVudFVwbG9hZCB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBUaGUgYEF0dGFjaG1lbnRQcmV2aWV3TGlzdGAgY29tcG9uZW50IGRpc3BsYXlzIGEgcHJldmlldyBvZiB0aGUgYXR0YWNobWVudHMgdXBsb2FkZWQgdG8gYSBtZXNzYWdlLiBVc2VycyBjYW4gZGVsZXRlIGF0dGFjaG1lbnRzIHVzaW5nIHRoZSBwcmV2aWV3IGNvbXBvbmVudCwgb3IgcmV0cnkgdXBsb2FkIGlmIGl0IGZhaWxlZCBwcmV2aW91c2x5LlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdzdHJlYW0tYXR0YWNobWVudC1wcmV2aWV3LWxpc3QnLFxuICB0ZW1wbGF0ZVVybDogJy4vYXR0YWNobWVudC1wcmV2aWV3LWxpc3QuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZXM6IFtdLFxufSlcbmV4cG9ydCBjbGFzcyBBdHRhY2htZW50UHJldmlld0xpc3RDb21wb25lbnQge1xuICAvKipcbiAgICogQSBzdHJlYW0gdGhhdCBlbWl0cyB0aGUgY3VycmVudCBmaWxlIHVwbG9hZHMgYW5kIHRoZWlyIHN0YXRlc1xuICAgKi9cbiAgQElucHV0KCkgYXR0YWNobWVudFVwbG9hZHMkOiBPYnNlcnZhYmxlPEF0dGFjaG1lbnRVcGxvYWRbXT4gfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBBbiBvdXRwdXQgdG8gbm90aWZ5IHRoZSBwYXJlbnQgY29tcG9uZW50IGlmIHRoZSB1c2VyIHRyaWVzIHRvIHJldHJ5IGEgZmFpbGVkIHVwbG9hZFxuICAgKi9cbiAgQE91dHB1dCgpIHJlYWRvbmx5IHJldHJ5QXR0YWNobWVudFVwbG9hZCA9IG5ldyBFdmVudEVtaXR0ZXI8RmlsZT4oKTtcbiAgLyoqXG4gICAqIEFuIG91dHB1dCB0byBub3RpZnkgdGhlIHBhcmVudCBjb21wb25lbnQgaWYgdGhlIHVzZXIgd2FudHMgdG8gZGVsZXRlIGEgZmlsZVxuICAgKi9cbiAgQE91dHB1dCgpIHJlYWRvbmx5IGRlbGV0ZUF0dGFjaG1lbnQgPSBuZXcgRXZlbnRFbWl0dGVyPEF0dGFjaG1lbnRVcGxvYWQ+KCk7XG4gIHRoZW1lVmVyc2lvbjogJzEnIHwgJzInO1xuXG4gIGNvbnN0cnVjdG9yKHRoZW1lU2VydmljZTogVGhlbWVTZXJ2aWNlKSB7XG4gICAgdGhpcy50aGVtZVZlcnNpb24gPSB0aGVtZVNlcnZpY2UudGhlbWVWZXJzaW9uO1xuICB9XG5cbiAgYXR0YWNobWVudFVwbG9hZFJldHJpZWQoZmlsZTogRmlsZSkge1xuICAgIHRoaXMucmV0cnlBdHRhY2htZW50VXBsb2FkLmVtaXQoZmlsZSk7XG4gIH1cblxuICBhdHRhY2htZW50RGVsZXRlZCh1cGxvYWQ6IEF0dGFjaG1lbnRVcGxvYWQpIHtcbiAgICB0aGlzLmRlbGV0ZUF0dGFjaG1lbnQuZW1pdCh1cGxvYWQpO1xuICB9XG5cbiAgdHJhY2tCeUZpbGUoXzogbnVtYmVyLCBpdGVtOiBBdHRhY2htZW50VXBsb2FkKSB7XG4gICAgcmV0dXJuIGl0ZW0uZmlsZTtcbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cInJmdS1pbWFnZS1wcmV2aWV3ZXJcIlxuICAqbmdJZj1cIihhdHRhY2htZW50VXBsb2FkcyQgfCBhc3luYyk/Lmxlbmd0aCAmJiB0aGVtZVZlcnNpb24gPT09ICcxJ1wiXG4+XG4gIDxuZy1jb250YWluZXJcbiAgICAqbmdGb3I9XCJcbiAgICAgIGxldCBhdHRhY2htZW50VXBsb2FkIG9mIGF0dGFjaG1lbnRVcGxvYWRzJCB8IGFzeW5jO1xuICAgICAgdHJhY2tCeTogdHJhY2tCeUZpbGVcbiAgICBcIlxuICA+XG4gICAgPGRpdlxuICAgICAgKm5nSWY9XCJhdHRhY2htZW50VXBsb2FkLnR5cGUgPT09ICdpbWFnZSdcIlxuICAgICAgY2xhc3M9XCJyZnUtaW1hZ2UtcHJldmlld2VyX19pbWFnZVwiXG4gICAgICBbY2xhc3MucmZ1LWltYWdlLXByZXZpZXdlcl9faW1hZ2UtLWxvYWRlZF09XCJcbiAgICAgICAgYXR0YWNobWVudFVwbG9hZC5zdGF0ZSA9PT0gJ3N1Y2Nlc3MnXG4gICAgICBcIlxuICAgICAgZGF0YS10ZXN0Y2xhc3M9XCJhdHRhY2htZW50LWltYWdlLXByZXZpZXdcIlxuICAgID5cbiAgICAgIDxkaXZcbiAgICAgICAgKm5nSWY9XCJhdHRhY2htZW50VXBsb2FkLnN0YXRlID09PSAnZXJyb3InXCJcbiAgICAgICAgY2xhc3M9XCJyZnUtaW1hZ2UtcHJldmlld2VyX19yZXRyeVwiXG4gICAgICAgIChjbGljayk9XCJhdHRhY2htZW50VXBsb2FkUmV0cmllZChhdHRhY2htZW50VXBsb2FkLmZpbGUpXCJcbiAgICAgICAgKGtleXVwLmVudGVyKT1cImF0dGFjaG1lbnRVcGxvYWRSZXRyaWVkKGF0dGFjaG1lbnRVcGxvYWQuZmlsZSlcIlxuICAgICAgICBkYXRhLXRlc3RjbGFzcz1cInVwbG9hZC1yZXRyeVwiXG4gICAgICA+XG4gICAgICAgIDxzdHJlYW0taWNvbi1wbGFjZWhvbGRlciBpY29uPVwicmV0cnlcIj48L3N0cmVhbS1pY29uLXBsYWNlaG9sZGVyPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwicmZ1LXRodW1ibmFpbF9fd3JhcHBlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicmZ1LXRodW1ibmFpbF9fb3ZlcmxheVwiPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwicmZ1LWljb24tYnV0dG9uXCJcbiAgICAgICAgICAgIGRhdGEtdGVzdGNsYXNzPVwiZmlsZS1kZWxldGVcIlxuICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiYXR0YWNobWVudERlbGV0ZWQoYXR0YWNobWVudFVwbG9hZClcIlxuICAgICAgICAgICAgKGtleXVwLmVudGVyKT1cImF0dGFjaG1lbnREZWxldGVkKGF0dGFjaG1lbnRVcGxvYWQpXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgaWNvbj1cImNsb3NlLW5vLW91dGxpbmVcIlxuICAgICAgICAgICAgPjwvc3RyZWFtLWljb24tcGxhY2Vob2xkZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW1nXG4gICAgICAgICAgKm5nSWY9XCJhdHRhY2htZW50VXBsb2FkLnVybCB8fCBhdHRhY2htZW50VXBsb2FkLnByZXZpZXdVcmlcIlxuICAgICAgICAgIHNyYz1cInt7XG4gICAgICAgICAgICBhdHRhY2htZW50VXBsb2FkLnVybFxuICAgICAgICAgICAgICA/IGF0dGFjaG1lbnRVcGxvYWQudXJsXG4gICAgICAgICAgICAgIDogYXR0YWNobWVudFVwbG9hZC5wcmV2aWV3VXJpXG4gICAgICAgICAgfX1cIlxuICAgICAgICAgIGFsdD1cInt7IGF0dGFjaG1lbnRVcGxvYWQuZmlsZS5uYW1lIH19XCJcbiAgICAgICAgICBjbGFzcz1cInJmdS10aHVtYm5haWxfX2ltYWdlXCJcbiAgICAgICAgICBkYXRhLXRlc3RjbGFzcz1cImF0dGFjaG1lbnQtaW1hZ2VcIlxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3RyZWFtLWxvYWRpbmctaW5kaWNhdG9yLXBsYWNlaG9sZGVyXG4gICAgICAgIGRhdGEtdGVzdGNsYXNzPVwibG9hZGluZy1pbmRpY2F0b3JcIlxuICAgICAgICBjb2xvcj1cInJnYmEoMjU1LDI1NSwyNTUsMC43KVwiXG4gICAgICAgICpuZ0lmPVwiYXR0YWNobWVudFVwbG9hZC5zdGF0ZSA9PT0gJ3VwbG9hZGluZydcIlxuICAgICAgPjwvc3RyZWFtLWxvYWRpbmctaW5kaWNhdG9yLXBsYWNlaG9sZGVyPlxuICAgIDwvZGl2PlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwicmZ1LWZpbGUtcHJldmlld2VyXCJcbiAgICAgICpuZ0lmPVwiXG4gICAgICAgIGF0dGFjaG1lbnRVcGxvYWQudHlwZSA9PT0gJ2ZpbGUnIHx8IGF0dGFjaG1lbnRVcGxvYWQudHlwZSA9PT0gJ3ZpZGVvJ1xuICAgICAgXCJcbiAgICAgIGRhdGEtdGVzdGNsYXNzPVwiYXR0YWNobWVudC1maWxlLXByZXZpZXdcIlxuICAgID5cbiAgICAgIDxvbD5cbiAgICAgICAgPGxpXG4gICAgICAgICAgY2xhc3M9XCJyZnUtZmlsZS1wcmV2aWV3ZXJfX2ZpbGVcIlxuICAgICAgICAgIFtjbGFzcy5yZnUtZmlsZS1wcmV2aWV3ZXJfX2ZpbGUtLXVwbG9hZGluZ109XCJcbiAgICAgICAgICAgIGF0dGFjaG1lbnRVcGxvYWQuc3RhdGUgPT09ICd1cGxvYWRpbmcnXG4gICAgICAgICAgXCJcbiAgICAgICAgICBbY2xhc3MucmZ1LWZpbGUtcHJldmlld2VyX19maWxlLS1mYWlsZWRdPVwiXG4gICAgICAgICAgICBhdHRhY2htZW50VXBsb2FkLnN0YXRlID09PSAnZXJyb3InXG4gICAgICAgICAgXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxzdHJlYW0taWNvbi1wbGFjZWhvbGRlciBpY29uPVwiZmlsZVwiPjwvc3RyZWFtLWljb24tcGxhY2Vob2xkZXI+XG5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgZGF0YS10ZXN0Y2xhc3M9XCJmaWxlLWRvd25sb2FkLWxpbmtcIlxuICAgICAgICAgICAgaHJlZj1cInt7IGF0dGFjaG1lbnRVcGxvYWQudXJsIH19XCJcbiAgICAgICAgICAgIChjbGljayk9XCJhdHRhY2htZW50VXBsb2FkLnVybCA/IG51bGwgOiAkZXZlbnQucHJldmVudERlZmF1bHQoKVwiXG4gICAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwiXG4gICAgICAgICAgICAgIGF0dGFjaG1lbnRVcGxvYWQudXJsID8gbnVsbCA6ICRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgZG93bmxvYWRcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyBhdHRhY2htZW50VXBsb2FkLmZpbGUubmFtZSB9fVxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImF0dGFjaG1lbnRVcGxvYWQuc3RhdGUgPT09ICdlcnJvcidcIj5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdGNsYXNzPVwidXBsb2FkLXJldHJ5XCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cInJmdS1maWxlLXByZXZpZXdlcl9fZmFpbGVkXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiYXR0YWNobWVudFVwbG9hZFJldHJpZWQoYXR0YWNobWVudFVwbG9hZC5maWxlKVwiXG4gICAgICAgICAgICAgICAgKGtleXVwLmVudGVyKT1cImF0dGFjaG1lbnRVcGxvYWRSZXRyaWVkKGF0dGFjaG1lbnRVcGxvYWQuZmlsZSlcIlxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgc3RyZWFtQ2hhdC5mYWlsZWRcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzcz1cInJmdS1maWxlLXByZXZpZXdlcl9fcmV0cnlcIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJhdHRhY2htZW50VXBsb2FkUmV0cmllZChhdHRhY2htZW50VXBsb2FkLmZpbGUpXCJcbiAgICAgICAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwiYXR0YWNobWVudFVwbG9hZFJldHJpZWQoYXR0YWNobWVudFVwbG9hZC5maWxlKVwiXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBzdHJlYW1DaGF0LnJldHJ5XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9hPlxuXG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGRhdGEtdGVzdGNsYXNzPVwiZmlsZS1kZWxldGVcIlxuICAgICAgICAgICAgY2xhc3M9XCJyZnUtZmlsZS1wcmV2aWV3ZXJfX2Nsb3NlLWJ1dHRvblwiXG4gICAgICAgICAgICAoY2xpY2spPVwiYXR0YWNobWVudERlbGV0ZWQoYXR0YWNobWVudFVwbG9hZClcIlxuICAgICAgICAgICAgKGtleXVwLmVudGVyKT1cImF0dGFjaG1lbnREZWxldGVkKGF0dGFjaG1lbnRVcGxvYWQpXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgaWNvbj1cImNsb3NlLW5vLW91dGxpbmVcIlxuICAgICAgICAgICAgPjwvc3RyZWFtLWljb24tcGxhY2Vob2xkZXI+XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICpuZ0lmPVwiYXR0YWNobWVudFVwbG9hZC5zdGF0ZSA9PT0gJ3VwbG9hZGluZydcIlxuICAgICAgICAgICAgY2xhc3M9XCJyZnUtZmlsZS1wcmV2aWV3ZXJfX2xvYWRpbmctaW5kaWNhdG9yXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3RyZWFtLWxvYWRpbmctaW5kaWNhdG9yLXBsYWNlaG9sZGVyPjwvc3RyZWFtLWxvYWRpbmctaW5kaWNhdG9yLXBsYWNlaG9sZGVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPlxuICAgICAgPC9vbD5cbiAgICA8L2Rpdj5cbiAgPC9uZy1jb250YWluZXI+XG48L2Rpdj5cblxuPGRpdlxuICBjbGFzcz1cInN0ci1jaGF0X19hdHRhY2htZW50LXByZXZpZXctbGlzdFwiXG4gICpuZ0lmPVwiKGF0dGFjaG1lbnRVcGxvYWRzJCB8IGFzeW5jKT8ubGVuZ3RoICYmIHRoZW1lVmVyc2lvbiA9PT0gJzInXCJcbj5cbiAgPGRpdiBjbGFzcz1cInN0ci1jaGF0X19hdHRhY2htZW50LWxpc3Qtc2Nyb2xsLWNvbnRhaW5lclwiPlxuICAgIDxuZy1jb250YWluZXJcbiAgICAgICpuZ0Zvcj1cIlxuICAgICAgICBsZXQgYXR0YWNobWVudFVwbG9hZCBvZiBhdHRhY2htZW50VXBsb2FkcyQgfCBhc3luYztcbiAgICAgICAgdHJhY2tCeTogdHJhY2tCeUZpbGVcbiAgICAgIFwiXG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICAqbmdJZj1cImF0dGFjaG1lbnRVcGxvYWQudHlwZSA9PT0gJ2ltYWdlJ1wiXG4gICAgICAgIGNsYXNzPVwic3RyLWNoYXRfX2F0dGFjaG1lbnQtcHJldmlldy1pbWFnZVwiXG4gICAgICAgIGRhdGEtdGVzdGNsYXNzPVwiYXR0YWNobWVudC1pbWFnZS1wcmV2aWV3XCJcbiAgICAgID5cbiAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICBkZWxldGVCdXR0b247XG4gICAgICAgICAgICBjb250ZXh0OiB7IGF0dGFjaG1lbnRVcGxvYWQ6IGF0dGFjaG1lbnRVcGxvYWQgfVxuICAgICAgICAgIFwiXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPGRpdlxuICAgICAgICAgICpuZ0lmPVwiYXR0YWNobWVudFVwbG9hZC5zdGF0ZSA9PT0gJ3VwbG9hZGluZydcIlxuICAgICAgICAgIGNsYXNzPVwic3RyLWNoYXRfX2F0dGFjaG1lbnQtcHJldmlldy1pbWFnZS1sb2FkaW5nXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxzdHJlYW0tbG9hZGluZy1pbmRpY2F0b3ItcGxhY2Vob2xkZXJcbiAgICAgICAgICAgIGRhdGEtdGVzdGNsYXNzPVwibG9hZGluZy1pbmRpY2F0b3JcIlxuICAgICAgICAgICAgW3NpemVdPVwiMThcIlxuICAgICAgICAgID48L3N0cmVhbS1sb2FkaW5nLWluZGljYXRvci1wbGFjZWhvbGRlcj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgcmV0cnlCdXR0b247XG4gICAgICAgICAgICBjb250ZXh0OiB7IGF0dGFjaG1lbnRVcGxvYWQ6IGF0dGFjaG1lbnRVcGxvYWQgfVxuICAgICAgICAgIFwiXG4gICAgICAgID48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPGltZ1xuICAgICAgICAgICpuZ0lmPVwiYXR0YWNobWVudFVwbG9hZC51cmwgfHwgYXR0YWNobWVudFVwbG9hZC5wcmV2aWV3VXJpXCJcbiAgICAgICAgICBzcmM9XCJ7e1xuICAgICAgICAgICAgYXR0YWNobWVudFVwbG9hZC51cmxcbiAgICAgICAgICAgICAgPyBhdHRhY2htZW50VXBsb2FkLnVybFxuICAgICAgICAgICAgICA6IGF0dGFjaG1lbnRVcGxvYWQucHJldmlld1VyaVxuICAgICAgICAgIH19XCJcbiAgICAgICAgICBhbHQ9XCJ7eyBhdHRhY2htZW50VXBsb2FkLmZpbGUubmFtZSB9fVwiXG4gICAgICAgICAgY2xhc3M9XCJzdHItY2hhdF9fYXR0YWNobWVudC1wcmV2aWV3LXRodW1ibmFpbFwiXG4gICAgICAgICAgZGF0YS10ZXN0Y2xhc3M9XCJhdHRhY2htZW50LWltYWdlXCJcbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInN0ci1jaGF0X19hdHRhY2htZW50LXByZXZpZXctZmlsZVwiXG4gICAgICAgICpuZ0lmPVwiXG4gICAgICAgICAgYXR0YWNobWVudFVwbG9hZC50eXBlID09PSAnZmlsZScgfHwgYXR0YWNobWVudFVwbG9hZC50eXBlID09PSAndmlkZW8nXG4gICAgICAgIFwiXG4gICAgICAgIGRhdGEtdGVzdGNsYXNzPVwiYXR0YWNobWVudC1maWxlLXByZXZpZXdcIlxuICAgICAgPlxuICAgICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXJcbiAgICAgICAgICBpY29uPVwidW5zcGVjaWZpZWQtZmlsZXR5cGVcIlxuICAgICAgICA+PC9zdHJlYW0taWNvbi1wbGFjZWhvbGRlcj5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwic3RyLWNoYXRfX2F0dGFjaG1lbnQtcHJldmlldy1maWxlLWVuZFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdHItY2hhdF9fYXR0YWNobWVudC1wcmV2aWV3LWZpbGUtbmFtZVwiPlxuICAgICAgICAgICAge3sgYXR0YWNobWVudFVwbG9hZC5maWxlLm5hbWUgfX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgKm5nSWY9XCJhdHRhY2htZW50VXBsb2FkLnN0YXRlID09PSAnc3VjY2VzcydcIlxuICAgICAgICAgICAgY2xhc3M9XCJzdHItY2hhdF9fYXR0YWNobWVudC1wcmV2aWV3LWZpbGUtZG93bmxvYWRcIlxuICAgICAgICAgICAgZGF0YS10ZXN0Y2xhc3M9XCJmaWxlLWRvd25sb2FkLWxpbmtcIlxuICAgICAgICAgICAgaHJlZj1cInt7IGF0dGFjaG1lbnRVcGxvYWQudXJsIH19XCJcbiAgICAgICAgICAgIChjbGljayk9XCJhdHRhY2htZW50VXBsb2FkLnVybCA/IG51bGwgOiAkZXZlbnQucHJldmVudERlZmF1bHQoKVwiXG4gICAgICAgICAgICAoa2V5dXAuZW50ZXIpPVwiXG4gICAgICAgICAgICAgIGF0dGFjaG1lbnRVcGxvYWQudXJsID8gbnVsbCA6ICRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBcIlxuICAgICAgICAgICAgZG93bmxvYWRcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXIgaWNvbj1cImRvd25sb2FkXCI+PC9zdHJlYW0taWNvbi1wbGFjZWhvbGRlcj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPHN0cmVhbS1sb2FkaW5nLWluZGljYXRvci1wbGFjZWhvbGRlclxuICAgICAgICAgICAgKm5nSWY9XCJhdHRhY2htZW50VXBsb2FkLnN0YXRlID09PSAndXBsb2FkaW5nJ1wiXG4gICAgICAgICAgICBkYXRhLXRlc3RjbGFzcz1cImxvYWRpbmctaW5kaWNhdG9yXCJcbiAgICAgICAgICAgIFtzaXplXT1cIjE4XCJcbiAgICAgICAgICA+PC9zdHJlYW0tbG9hZGluZy1pbmRpY2F0b3ItcGxhY2Vob2xkZXI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcbiAgICAgICAgICAgIGRlbGV0ZUJ1dHRvbjtcbiAgICAgICAgICAgIGNvbnRleHQ6IHsgYXR0YWNobWVudFVwbG9hZDogYXR0YWNobWVudFVwbG9hZCB9XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvbmctY29udGFpbmVyPlxuICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcbiAgICAgICAgICAgIHJldHJ5QnV0dG9uO1xuICAgICAgICAgICAgY29udGV4dDogeyBhdHRhY2htZW50VXBsb2FkOiBhdHRhY2htZW50VXBsb2FkIH1cbiAgICAgICAgICBcIlxuICAgICAgICA+PC9uZy1jb250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPG5nLXRlbXBsYXRlICNkZWxldGVCdXR0b24gbGV0LWF0dGFjaG1lbnRVcGxvYWQ9XCJhdHRhY2htZW50VXBsb2FkXCI+XG4gIDxkaXZcbiAgICBjbGFzcz1cInN0ci1jaGF0X19hdHRhY2htZW50LXByZXZpZXctZGVsZXRlXCJcbiAgICBkYXRhLXRlc3RjbGFzcz1cImZpbGUtZGVsZXRlXCJcbiAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAoY2xpY2spPVwiYXR0YWNobWVudERlbGV0ZWQoYXR0YWNobWVudFVwbG9hZClcIlxuICAgIChrZXl1cC5lbnRlcik9XCJhdHRhY2htZW50RGVsZXRlZChhdHRhY2htZW50VXBsb2FkKVwiXG4gID5cbiAgICA8c3RyZWFtLWljb24tcGxhY2Vob2xkZXIgaWNvbj1cImNsb3NlLW5vLW91dGxpbmVcIj48L3N0cmVhbS1pY29uLXBsYWNlaG9sZGVyPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjcmV0cnlCdXR0b24gbGV0LWF0dGFjaG1lbnRVcGxvYWQ9XCJhdHRhY2htZW50VXBsb2FkXCI+XG4gIDxkaXZcbiAgICAqbmdJZj1cImF0dGFjaG1lbnRVcGxvYWQuc3RhdGUgPT09ICdlcnJvcidcIlxuICAgIGNsYXNzPVwic3RyLWNoYXRfX2F0dGFjaG1lbnQtcHJldmlldy1lcnJvciBzdHItY2hhdF9fYXR0YWNobWVudC1wcmV2aWV3LWVycm9yLXt7XG4gICAgICBhdHRhY2htZW50VXBsb2FkLnR5cGUgPT09ICdpbWFnZScgPyAnaW1hZ2UnIDogJ2ZpbGUnXG4gICAgfX1cIlxuICAgIChjbGljayk9XCJhdHRhY2htZW50VXBsb2FkUmV0cmllZChhdHRhY2htZW50VXBsb2FkLmZpbGUpXCJcbiAgICAoa2V5dXAuZW50ZXIpPVwiYXR0YWNobWVudFVwbG9hZFJldHJpZWQoYXR0YWNobWVudFVwbG9hZC5maWxlKVwiXG4gICAgZGF0YS10ZXN0Y2xhc3M9XCJ1cGxvYWQtcmV0cnlcIlxuICA+XG4gICAgPHN0cmVhbS1pY29uLXBsYWNlaG9sZGVyIGljb249XCJyZXRyeVwiPjwvc3RyZWFtLWljb24tcGxhY2Vob2xkZXI+XG4gIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==