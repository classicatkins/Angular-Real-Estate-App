import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import * as i0 from "@angular/core";
/**
 * The `NotificationService` can be used to add or remove notifications. By default the [`NotificationList`](../components/NotificationListComponent.mdx) component displays the currently active notifications.
 */
export class NotificationService {
    constructor() {
        this.notificationsSubject = new BehaviorSubject([]);
        this.notifications$ = this.notificationsSubject.asObservable();
    }
    /**
     * Displays a notification for the given amount of time.
     * @param content The text of the notification or the HTML template for the notification
     * @param type The type of the notification
     * @param timeout The number of milliseconds while the notification should be visible
     * @param translateParams Translation parameters for the `content` (for text notifications)
     * @param templateContext The input of the notification template (for HTML notifications)
     * @returns A method to clear the notification (before the timeout).
     */
    addTemporaryNotification(content, type = 'error', timeout = 5000, translateParams, templateContext) {
        const notification = this.createNotification(content, type, translateParams, templateContext);
        const id = setTimeout(() => this.removeNotification(notification.id), timeout);
        notification.dismissFn = () => {
            clearTimeout(id);
            this.removeNotification(notification.id);
        };
        this.notificationsSubject.next([
            ...this.notificationsSubject.getValue(),
            notification,
        ]);
        return notification.dismissFn;
    }
    /**
     * Displays a notification, that will be visible until it's removed.
     * @param content The text of the notification or the HTML template for the notification
     * @param type The type of the notification
     * @param translateParams Translation parameters for the `content` (for text notifications)
     * @param templateContext The input of the notification template (for HTML notifications)
     * @returns A method to clear the notification.
     */
    addPermanentNotification(content, type = 'error', translateParams, templateContext) {
        const notification = this.createNotification(content, type, translateParams, templateContext);
        this.notificationsSubject.next([
            ...this.notificationsSubject.getValue(),
            notification,
        ]);
        return notification.dismissFn;
    }
    createNotification(content, type, translateParams, templateContext) {
        const id = new Date().getTime().toString() + Math.random().toString();
        return {
            id,
            [typeof content === 'string' ? 'text' : 'template']: content,
            type,
            translateParams,
            templateContext,
            dismissFn: () => this.removeNotification(id),
        };
    }
    removeNotification(id) {
        const notifications = this.notificationsSubject.getValue();
        const index = notifications.findIndex((n) => n.id === id);
        if (index === -1) {
            return;
        }
        notifications.splice(index, 1);
        this.notificationsSubject.next([...notifications]);
    }
}
NotificationService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.5", ngImport: i0, type: NotificationService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
NotificationService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.5", ngImport: i0, type: NotificationService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.5", ngImport: i0, type: NotificationService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9zdHJlYW0tY2hhdC1hbmd1bGFyL3NyYy9saWIvbm90aWZpY2F0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBZSxNQUFNLGVBQWUsQ0FBQztBQUN4RCxPQUFPLEVBQUUsZUFBZSxFQUFjLE1BQU0sTUFBTSxDQUFDOztBQUduRDs7R0FFRztBQUlILE1BQU0sT0FBTyxtQkFBbUI7SUFPOUI7UUFGUSx5QkFBb0IsR0FBRyxJQUFJLGVBQWUsQ0FBd0IsRUFBRSxDQUFDLENBQUM7UUFHNUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDakUsQ0FBQztJQUVEOzs7Ozs7OztPQVFHO0lBQ0gsd0JBQXdCLENBQ3RCLE9BQWdDLEVBQ2hDLE9BQXlCLE9BQU8sRUFDaEMsVUFBa0IsSUFBSSxFQUN0QixlQUF3QixFQUN4QixlQUFtQjtRQUVuQixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQzFDLE9BQU8sRUFDUCxJQUFJLEVBQ0osZUFBZSxFQUNmLGVBQWUsQ0FDaEIsQ0FBQztRQUNGLE1BQU0sRUFBRSxHQUFHLFVBQVUsQ0FDbkIsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsRUFDOUMsT0FBTyxDQUNSLENBQUM7UUFDRixZQUFZLENBQUMsU0FBUyxHQUFHLEdBQUcsRUFBRTtZQUM1QixZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO1lBQzdCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRTtZQUN2QyxZQUFZO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsT0FBTyxZQUFZLENBQUMsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFRDs7Ozs7OztPQU9HO0lBQ0gsd0JBQXdCLENBTXRCLE9BQWdDLEVBQ2hDLE9BQXlCLE9BQU8sRUFDaEMsZUFBd0IsRUFDeEIsZUFBbUI7UUFFbkIsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUMxQyxPQUFPLEVBQ1AsSUFBSSxFQUNKLGVBQWUsRUFDZixlQUFlLENBQ2hCLENBQUM7UUFDRixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDO1lBQzdCLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLFFBQVEsRUFBRTtZQUN2QyxZQUFZO1NBQ2IsQ0FBQyxDQUFDO1FBRUgsT0FBTyxZQUFZLENBQUMsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxrQkFBa0IsQ0FDeEIsT0FBZ0MsRUFDaEMsSUFBc0IsRUFDdEIsZUFBd0IsRUFDeEIsZUFBbUI7UUFFbkIsTUFBTSxFQUFFLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDdEUsT0FBTztZQUNMLEVBQUU7WUFDRixDQUFDLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsRUFBRSxPQUFPO1lBQzVELElBQUk7WUFDSixlQUFlO1lBQ2YsZUFBZTtZQUNmLFNBQVMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsRUFBRSxDQUFDO1NBQzdDLENBQUM7SUFDSixDQUFDO0lBRU8sa0JBQWtCLENBQUMsRUFBVTtRQUNuQyxNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDM0QsTUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUMxRCxJQUFJLEtBQUssS0FBSyxDQUFDLENBQUMsRUFBRTtZQUNoQixPQUFPO1NBQ1I7UUFDRCxhQUFhLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQ3JELENBQUM7O2dIQTNHVSxtQkFBbUI7b0hBQW5CLG1CQUFtQixjQUZsQixNQUFNOzJGQUVQLG1CQUFtQjtrQkFIL0IsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBUZW1wbGF0ZVJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25QYXlsb2FkLCBOb3RpZmljYXRpb25UeXBlIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8qKlxuICogVGhlIGBOb3RpZmljYXRpb25TZXJ2aWNlYCBjYW4gYmUgdXNlZCB0byBhZGQgb3IgcmVtb3ZlIG5vdGlmaWNhdGlvbnMuIEJ5IGRlZmF1bHQgdGhlIFtgTm90aWZpY2F0aW9uTGlzdGBdKC4uL2NvbXBvbmVudHMvTm90aWZpY2F0aW9uTGlzdENvbXBvbmVudC5tZHgpIGNvbXBvbmVudCBkaXNwbGF5cyB0aGUgY3VycmVudGx5IGFjdGl2ZSBub3RpZmljYXRpb25zLlxuICovXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uU2VydmljZSB7XG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgY3VycmVudGx5IGFjdGl2ZSBbbm90aWZpY2F0aW9uc10oaHR0cHM6Ly9naXRodWIuY29tL0dldFN0cmVhbS9zdHJlYW0tY2hhdC1hbmd1bGFyL2Jsb2IvbWFzdGVyL3Byb2plY3RzL3N0cmVhbS1jaGF0LWFuZ3VsYXIvc3JjL2xpYi9ub3RpZmljYXRpb24uc2VydmljZS50cykuXG4gICAqL1xuICBub3RpZmljYXRpb25zJDogT2JzZXJ2YWJsZTxOb3RpZmljYXRpb25QYXlsb2FkW10+O1xuICBwcml2YXRlIG5vdGlmaWNhdGlvbnNTdWJqZWN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxOb3RpZmljYXRpb25QYXlsb2FkW10+KFtdKTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm5vdGlmaWNhdGlvbnMkID0gdGhpcy5ub3RpZmljYXRpb25zU3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyBhIG5vdGlmaWNhdGlvbiBmb3IgdGhlIGdpdmVuIGFtb3VudCBvZiB0aW1lLlxuICAgKiBAcGFyYW0gY29udGVudCBUaGUgdGV4dCBvZiB0aGUgbm90aWZpY2F0aW9uIG9yIHRoZSBIVE1MIHRlbXBsYXRlIGZvciB0aGUgbm90aWZpY2F0aW9uXG4gICAqIEBwYXJhbSB0eXBlIFRoZSB0eXBlIG9mIHRoZSBub3RpZmljYXRpb25cbiAgICogQHBhcmFtIHRpbWVvdXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgd2hpbGUgdGhlIG5vdGlmaWNhdGlvbiBzaG91bGQgYmUgdmlzaWJsZVxuICAgKiBAcGFyYW0gdHJhbnNsYXRlUGFyYW1zIFRyYW5zbGF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBgY29udGVudGAgKGZvciB0ZXh0IG5vdGlmaWNhdGlvbnMpXG4gICAqIEBwYXJhbSB0ZW1wbGF0ZUNvbnRleHQgVGhlIGlucHV0IG9mIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUgKGZvciBIVE1MIG5vdGlmaWNhdGlvbnMpXG4gICAqIEByZXR1cm5zIEEgbWV0aG9kIHRvIGNsZWFyIHRoZSBub3RpZmljYXRpb24gKGJlZm9yZSB0aGUgdGltZW91dCkuXG4gICAqL1xuICBhZGRUZW1wb3JhcnlOb3RpZmljYXRpb248VD4oXG4gICAgY29udGVudDogc3RyaW5nIHwgVGVtcGxhdGVSZWY8VD4sXG4gICAgdHlwZTogTm90aWZpY2F0aW9uVHlwZSA9ICdlcnJvcicsXG4gICAgdGltZW91dDogbnVtYmVyID0gNTAwMCxcbiAgICB0cmFuc2xhdGVQYXJhbXM/OiBPYmplY3QsXG4gICAgdGVtcGxhdGVDb250ZXh0PzogVFxuICApIHtcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbjxUPihcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0eXBlLFxuICAgICAgdHJhbnNsYXRlUGFyYW1zLFxuICAgICAgdGVtcGxhdGVDb250ZXh0XG4gICAgKTtcbiAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoXG4gICAgICAoKSA9PiB0aGlzLnJlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24uaWQpLFxuICAgICAgdGltZW91dFxuICAgICk7XG4gICAgbm90aWZpY2F0aW9uLmRpc21pc3NGbiA9ICgpID0+IHtcbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgICB0aGlzLnJlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24uaWQpO1xuICAgIH07XG4gICAgdGhpcy5ub3RpZmljYXRpb25zU3ViamVjdC5uZXh0KFtcbiAgICAgIC4uLnRoaXMubm90aWZpY2F0aW9uc1N1YmplY3QuZ2V0VmFsdWUoKSxcbiAgICAgIG5vdGlmaWNhdGlvbixcbiAgICBdKTtcblxuICAgIHJldHVybiBub3RpZmljYXRpb24uZGlzbWlzc0ZuO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIGEgbm90aWZpY2F0aW9uLCB0aGF0IHdpbGwgYmUgdmlzaWJsZSB1bnRpbCBpdCdzIHJlbW92ZWQuXG4gICAqIEBwYXJhbSBjb250ZW50IFRoZSB0ZXh0IG9mIHRoZSBub3RpZmljYXRpb24gb3IgdGhlIEhUTUwgdGVtcGxhdGUgZm9yIHRoZSBub3RpZmljYXRpb25cbiAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhlIG5vdGlmaWNhdGlvblxuICAgKiBAcGFyYW0gdHJhbnNsYXRlUGFyYW1zIFRyYW5zbGF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBgY29udGVudGAgKGZvciB0ZXh0IG5vdGlmaWNhdGlvbnMpXG4gICAqIEBwYXJhbSB0ZW1wbGF0ZUNvbnRleHQgVGhlIGlucHV0IG9mIHRoZSBub3RpZmljYXRpb24gdGVtcGxhdGUgKGZvciBIVE1MIG5vdGlmaWNhdGlvbnMpXG4gICAqIEByZXR1cm5zIEEgbWV0aG9kIHRvIGNsZWFyIHRoZSBub3RpZmljYXRpb24uXG4gICAqL1xuICBhZGRQZXJtYW5lbnROb3RpZmljYXRpb248XG4gICAgVCA9IHtcbiAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICAgIGRpc21pc3NGbjogKCkgPT4ge307XG4gICAgfVxuICA+KFxuICAgIGNvbnRlbnQ6IHN0cmluZyB8IFRlbXBsYXRlUmVmPFQ+LFxuICAgIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUgPSAnZXJyb3InLFxuICAgIHRyYW5zbGF0ZVBhcmFtcz86IE9iamVjdCxcbiAgICB0ZW1wbGF0ZUNvbnRleHQ/OiBUXG4gICkge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uPFQ+KFxuICAgICAgY29udGVudCxcbiAgICAgIHR5cGUsXG4gICAgICB0cmFuc2xhdGVQYXJhbXMsXG4gICAgICB0ZW1wbGF0ZUNvbnRleHRcbiAgICApO1xuICAgIHRoaXMubm90aWZpY2F0aW9uc1N1YmplY3QubmV4dChbXG4gICAgICAuLi50aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0LmdldFZhbHVlKCksXG4gICAgICBub3RpZmljYXRpb24sXG4gICAgXSk7XG5cbiAgICByZXR1cm4gbm90aWZpY2F0aW9uLmRpc21pc3NGbjtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlTm90aWZpY2F0aW9uPFQ+KFxuICAgIGNvbnRlbnQ6IHN0cmluZyB8IFRlbXBsYXRlUmVmPFQ+LFxuICAgIHR5cGU6IE5vdGlmaWNhdGlvblR5cGUsXG4gICAgdHJhbnNsYXRlUGFyYW1zPzogT2JqZWN0LFxuICAgIHRlbXBsYXRlQ29udGV4dD86IFRcbiAgKSB7XG4gICAgY29uc3QgaWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygpO1xuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIFt0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycgPyAndGV4dCcgOiAndGVtcGxhdGUnXTogY29udGVudCxcbiAgICAgIHR5cGUsXG4gICAgICB0cmFuc2xhdGVQYXJhbXMsXG4gICAgICB0ZW1wbGF0ZUNvbnRleHQsXG4gICAgICBkaXNtaXNzRm46ICgpID0+IHRoaXMucmVtb3ZlTm90aWZpY2F0aW9uKGlkKSxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVOb3RpZmljYXRpb24oaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSB0aGlzLm5vdGlmaWNhdGlvbnNTdWJqZWN0LmdldFZhbHVlKCk7XG4gICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zLmZpbmRJbmRleCgobikgPT4gbi5pZCA9PT0gaWQpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMubm90aWZpY2F0aW9uc1N1YmplY3QubmV4dChbLi4ubm90aWZpY2F0aW9uc10pO1xuICB9XG59XG4iXX0=