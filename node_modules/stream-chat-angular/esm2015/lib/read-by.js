export const getReadBy = (message, channel) => {
    const readBy = [];
    Object.keys(channel.state.read).forEach((key) => {
        var _a;
        if (channel.state.read[key].last_read.getTime() >=
            message.created_at.getTime() &&
            ((_a = message.user) === null || _a === void 0 ? void 0 : _a.id) !== key) {
            readBy.push(channel.state.read[key].user);
        }
    });
    return readBy;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhZC1ieS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3N0cmVhbS1jaGF0LWFuZ3VsYXIvc3JjL2xpYi9yZWFkLWJ5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBRyxDQUd2QixPQUFpQyxFQUNqQyxPQUFtQixFQUNuQixFQUFFO0lBQ0YsTUFBTSxNQUFNLEdBQW1CLEVBQUUsQ0FBQztJQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7O1FBQzlDLElBQ0UsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRTtZQUN6QyxPQUFPLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRTtZQUM5QixDQUFBLE1BQUEsT0FBTyxDQUFDLElBQUksMENBQUUsRUFBRSxNQUFLLEdBQUcsRUFDeEI7WUFDQSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzNDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFubmVsLCBGb3JtYXRNZXNzYWdlUmVzcG9uc2UsIFVzZXJSZXNwb25zZSB9IGZyb20gJ3N0cmVhbS1jaGF0JztcbmltcG9ydCB7IERlZmF1bHRTdHJlYW1DaGF0R2VuZXJpY3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IGdldFJlYWRCeSA9IDxcbiAgVCBleHRlbmRzIERlZmF1bHRTdHJlYW1DaGF0R2VuZXJpY3MgPSBEZWZhdWx0U3RyZWFtQ2hhdEdlbmVyaWNzXG4+KFxuICBtZXNzYWdlOiBGb3JtYXRNZXNzYWdlUmVzcG9uc2U8VD4sXG4gIGNoYW5uZWw6IENoYW5uZWw8VD5cbikgPT4ge1xuICBjb25zdCByZWFkQnk6IFVzZXJSZXNwb25zZVtdID0gW107XG4gIE9iamVjdC5rZXlzKGNoYW5uZWwuc3RhdGUucmVhZCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgaWYgKFxuICAgICAgY2hhbm5lbC5zdGF0ZS5yZWFkW2tleV0ubGFzdF9yZWFkLmdldFRpbWUoKSA+PVxuICAgICAgICBtZXNzYWdlLmNyZWF0ZWRfYXQuZ2V0VGltZSgpICYmXG4gICAgICBtZXNzYWdlLnVzZXI/LmlkICE9PSBrZXlcbiAgICApIHtcbiAgICAgIHJlYWRCeS5wdXNoKGNoYW5uZWwuc3RhdGUucmVhZFtrZXldLnVzZXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlYWRCeTtcbn07XG4iXX0=